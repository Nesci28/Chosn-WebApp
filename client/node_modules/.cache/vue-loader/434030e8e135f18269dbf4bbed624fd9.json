{"remainingRequest":"/home/nos/Webapp/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nos/Webapp/client/src/views/EditSystem.vue?vue&type=style&index=0&id=384f04a8&scoped=true&lang=css&","dependencies":[{"path":"/home/nos/Webapp/client/src/views/EditSystem.vue","mtime":1556115138616},{"path":"/home/nos/Webapp/client/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.editor {\n  width: 100%;\n  height: 75%;\n  max-height: 75%;\n}\n.centerText{\n  text-align: center;\n  text-decoration: underline;\n}\n",{"version":3,"sources":["EditSystem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditSystem.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <div class=\"background pa-5\">\n      <v-progress-circular\n        :size=\"140\"\n        :width=\"14\"\n        v-if=\"loading\"\n        indeterminate\n        color=\"rgb(240, 226, 150)\"\n        class=\"middle\"\n      ></v-progress-circular>\n      <Monaco\n        class=\"editor\"\n        language=\"json\"\n        :code=\"json\"\n        @mounted=\"onMounted\"\n        >\n      </Monaco>\n      <v-btn color=\"success\" @click=\"save\">Save</v-btn>\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Monaco from 'monaco-editor-forvue';\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      urlGet: '',\n      urlAdd: '',\n      id: 0,\n      json: 'null',\n      res: {\n        json: {},\n        info: {},\n        section: ''\n      },\n      loading: true\n    }\n  },\n  components: {\n    Monaco\n  },\n  methods: {\n    onMounted(editor) {\n      this.editor = editor;\n    },\n    async defaults(step) {\n      let configs = await this.$store.state.json.filter(ele => ele[\"Hostname\"] == this.id)[0][\"System Config\"]\n      if (step == 'saved') {\n        configs.Serial = configs.Serial + 1\n      }\n      this.json = JSON.stringify(configs, undefined, 4)\n      this.editor.setValue(this.json)\n    },\n    save() {\n      console.log(\"Saved!\")\n      this.res.json = JSON.parse(this.editor.getValue())\n      this.res.json.Serial = this.res.json.Serial + 1\n      let configs = this.$store.state.json.filter(ele => ele[\"Hostname\"] == this.id)[0]\n      this.res.info.Username = configs.Username\n      this.res.info.Password = configs.Password\n      this.res.info.Hostname = configs.Hostname\n      this.res.section = 'Coins Config'\n\n      console.log(JSON.stringify(this.res))\n      axios.post(this.urlAdd, this.res)\n        .catch(function (error) {\n            console.error(error);\n        });\n\n      this.defaults('saved')      \n    }\n  },\n  mounted() {\n    if (window.location.href.includes('localhost')) {\n      this.urlGet = \"http://localhost:5000/db\"\n      this.urlAdd = \"http://localhost:5000/rig/add\"\n    } else if (window.location.href.includes('192.168')) {\n      this.urlGet = \"http://192.168.0.127:5000/db\"\n      this.urlAdd = \"http://192.168.0.127:5000/rig/add\"\n    } else {\n      this.urlGet = \"https://nos-server.now.sh/db\"\n      this.urlAdd = \"https://nos-server.now.sh/rig/add\"\n    }\n    \n    this.$nextTick(() => {\n      window.addEventListener('resize', () => {\n        this.editor.layout()\n      });\n    })\n\n    this.loading = true\n    axios.post(this.urlGet)\n      .then(res => {\n        this.loading = false\n        if (res.data == \"not logged in!\") this.$router.push('/')\n        else {\n          this.id = this.$route.params.id;\n          this.defaults()\n        }\n    })\n  }\n};\n</script>\n\n<style scoped>\n.editor {\n  width: 100%;\n  height: 75%;\n  max-height: 75%;\n}\n.centerText{\n  text-align: center;\n  text-decoration: underline;\n}\n</style>\n\n"]}]}