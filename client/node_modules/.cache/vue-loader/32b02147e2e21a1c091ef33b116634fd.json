{"remainingRequest":"/home/nos/Webapp/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nos/Webapp/client/src/views/Logs.vue?vue&type=style&index=0&id=bdb3d49e&scoped=true&lang=css&","dependencies":[{"path":"/home/nos/Webapp/client/src/views/Logs.vue","mtime":1555981688692},{"path":"/home/nos/Webapp/client/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.text{\n  padding: 10%;\n  margin: 5%;\n  width: 90%;\n  border: 5px solid white;\n  background: rgba(0,0,0,0.75);\n  color: white;\n  z-index: 1;\n}\n",{"version":3,"sources":["Logs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Logs.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <div class=\"background\"></div>\n      <span v-if=\"logs.Nvidia\" v-html=\"logs.Nvidia\" class=\"text pa-5\">Nvidia</span>\n      <span v-if=\"logs.Amd\" v-html=\"logs.Amd\" class=\"text pa-5\"></span>\n      <span v-if=\"!logs.Nvidia && !logs.Amd\" class=\"text pa-5\">Error - no logs detected</span>\n  </v-app>\n</template>\n\n<script>\nconst axios = require('axios');\nconst Anser = require('anser');\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      id: 0,\n      // urlGet: 'http://localhost:5000/db/',\n      urlGet: 'https://nos-server.now.sh/db/',\n      logs: {\n        \"Nvidia\": null,\n        \"Amd\": null,\n        \"error\": \"No logs detected\"\n      },\n    }\n  },\n  methods: {\n    logsParser(logs) {\n      let logsArr = []\n      logs = logs.split('\\n')\n      logs.forEach(log => {\n        logsArr.push(Anser.ansiToHtml(log))\n      })\n      return logsArr.join(\"<br />\")\n    },\n    async minerLogs() {\n      let response = await axios.post(this.urlGet)\n      this.id = this.$route.params.id\n      this.logs.Nvidia = response.data.filter(ele => ele[\"Hostname\"] == this.id)[0].Nvidia[\"Miner Log\"]\n      this.logs.Amd = response.data.filter(ele => ele[\"Hostname\"] == this.id)[0].Amd[\"Miner Log\"]\n      // console.log(this.id, nvidiaLogs, amdLogs)\n      if (this.logs.Nvidia) {\n        this.logs.Nvidia = this.logsParser(this.logs.Nvidia)\n      }\n      if (this.logs.Amd) {\n        this.logs.Amd = this.logsParser(this.logs.Amd)\n      }\n      this.APITimer = setTimeout(this.minerLogs, 30000)\n    }\n  },\n  created() {\n    axios.post(this.urlGet)\n      .then(res => {\n        if (res.data == \"not logged in!\") this.$router.push('/')\n        else this.minerLogs()\n    })\n  },\n  destroyed() {\n    clearTimeout(this.APITimer);\n  }\n}\n</script>\n\n<style scoped>\n.text{\n  padding: 10%;\n  margin: 5%;\n  width: 90%;\n  border: 5px solid white;\n  background: rgba(0,0,0,0.75);\n  color: white;\n  z-index: 1;\n}\n</style>\n\n"]}]}