{"remainingRequest":"/home/nos/Webapp/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nos/Webapp/client/src/views/EditCoins.vue?vue&type=style&index=0&id=11146232&scoped=true&lang=css&","dependencies":[{"path":"/home/nos/Webapp/client/src/views/EditCoins.vue","mtime":1556544976718},{"path":"/home/nos/Webapp/client/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nos/Webapp/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.editor {\n  width: 100%;\n  height: 75%;\n  max-height: 75%;\n}\n.centerText{\n  text-align: center;\n  text-decoration: underline;\n}\n.infoCard {\n  margin-left: auto;\n  margin-right: auto;\n}\n.rounded-card {\n  background-color: rgb(46, 46, 46);\n  border-radius:30px;\n}\n",{"version":3,"sources":["EditCoins.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditCoins.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <div class=\"background pa-5\">\n      <v-progress-circular\n        :size=\"140\"\n        :width=\"14\"\n        v-if=\"loading\"\n        indeterminate\n        color=\"rgb(240, 226, 150)\"\n        class=\"middle\"\n      ></v-progress-circular>\n      <Monaco\n        class=\"editor\"\n        language=\"json\"\n        :code=\"json\"\n        @mounted=\"onMounted\"\n        >\n      </Monaco>\n      <v-btn :class=\"{'disable-events': fakeAccount}\" color=\"success\" @click=\"checkValidity\">Save</v-btn>\n      <v-btn color=\"warning\" to=\"/Rigs\">Cancel</v-btn>\n\n      <v-flex xs16 sm16 md6 lg6>\n        <v-dialog v-model=\"errorCard\" width=\"75%\">\n          <v-card class=\"infoCard rounded-card\">\n            <v-card-title class=\"red--text headline lighten-2 cardTitle\" primary-title>\n              Error in your JSON\n            </v-card-title>\n          </v-card>      \n        </v-dialog>\n      </v-flex>\n\n      <v-flex xs16 sm16 md6 lg6>\n        <v-dialog v-model=\"confirmCard\" width=\"75%\">\n          <v-card class=\"infoCard rounded-card\">\n            <v-card-title class=\"green--text headline lighten-2 cardTitle\" primary-title>\n            Confirm this new configuration ?\n            </v-card-title>\n            <v-text-field\n                class=\"confirmBox pr-5 pl-5 pt-5\"\n                color=\"white\"\n                label=\"Write 'CONFIRM' to confirm\"\n                v-model=\"confirmText\"\n                outline\n              ></v-text-field>\n              <v-btn @click=\"save\" v-if=\"confirmText == 'CONFIRM'\" color=\"warning\" class=\"deleteBtn\">Confirm</v-btn>\n          </v-card>      \n        </v-dialog>\n      </v-flex>\n\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Monaco from 'monaco-editor-forvue';\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      urlGet: '',\n      urlAdd: '',\n      id: 0,\n      json: 'null',\n      res: {\n        json: {},\n        info: {},\n        section: ''\n      },\n      loading: true,\n      confirmCard: false,\n      errorCard: false,\n      confirmText: '',\n      deleteRig: '',\n      fakeAccount: true\n    }\n  },\n  components: {\n    Monaco\n  },\n  methods: {\n    onMounted(editor) {\n      this.editor = editor;\n    },\n    async defaults(step) {\n      let configs = await this.$store.state.json.filter(ele => ele[\"Hostname\"] == this.id)[0][\"Coins Config\"]\n      if (step == 'saved') {\n        configs.Serial = configs.Serial + 1\n      }\n      this.json = JSON.stringify(configs, undefined, 4)\n      this.editor.setValue(this.json)\n    },\n    checkValidity() {\n      try {\n          JSON.parse(this.editor.getValue());\n      } catch (e) {\n          this.errorCard = !this.errorCard\n          return false;\n      }\n      this.confirmCard = !this.confirmCard\n      return true;\n    },\n    async save() {\n      this.confirmCard = !this.confirmCard\n      console.log(\"Saved!\")\n      this.res.json = JSON.parse(this.editor.getValue())\n      this.res.json.Serial = this.res.json.Serial + 1\n      let configs = this.$store.state.json.filter(ele => ele[\"Hostname\"] == this.id)[0]\n      this.res.info.Username = configs.Username\n      this.res.info.Hostname = configs.Hostname\n      this.res.section = 'Coins Config'\n\n      // console.log(JSON.stringify(this.res))\n      await axios.post(this.urlAdd, this.res)\n      for (let i = 0; i < this.$store.state.json.length; i++) {\n        if (this.$store.state.json[i].Hostname == this.id) {\n          this.$store.state.json[i][this.res.section] = this.res.json\n        }\n      }\n      this.defaults('saved')      \n    }\n  },\n  mounted() {\n    if (window.location.href.includes('localhost')) {\n      this.urlLogin = \"http://localhost:5000/action/login\"\n      this.urlGet = \"http://localhost:5000/db\"\n      this.urlAdd = \"http://localhost:5000/rig/add\"\n    } else if (window.location.href.includes('192.168')) {\n      this.urlLogin = \"http://192.168.0.127:5000/action/login\"\n      this.urlGet = \"http://192.168.0.127:5000/db\"\n      this.urlAdd = \"http://192.168.0.127:5000/rig/add\"\n    } else {\n      this.urlLogin = \"https://nos-server.now.sh/action/login\"\n      this.urlGet = \"https://nos-server.now.sh/db\"\n      this.urlAdd = \"https://nos-server.now.sh/rig/add\"\n    }\n    \n    this.$nextTick(() => {\n      window.addEventListener('resize', () => {\n        this.editor.layout()\n      });\n    })\n\n    this.loading = true\n    axios.get(this.urlLogin)\n      .then(res => {\n        this.loading = false\n        if (res.data == \"not logged in!\") this.$router.push('/')\n        else {\n          this.id = this.$route.params.id;\n          this.fakeAccount = res.data.fakeAccount\n          this.defaults()\n        }\n    })\n  }\n};\n</script>\n\n<style scoped>\n.editor {\n  width: 100%;\n  height: 75%;\n  max-height: 75%;\n}\n.centerText{\n  text-align: center;\n  text-decoration: underline;\n}\n.infoCard {\n  margin-left: auto;\n  margin-right: auto;\n}\n.rounded-card {\n  background-color: rgb(46, 46, 46);\n  border-radius:30px;\n}\n</style>\n\n"]}]}